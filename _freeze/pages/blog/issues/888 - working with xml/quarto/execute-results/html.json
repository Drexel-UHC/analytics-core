{
  "hash": "25cce0d50900b302d4531663da2a10d2",
  "result": {
    "markdown": "---\nauthor: Ran Li\ndate: \"08/31/2023\"\ntitle: \"Working with .XML in R\"\ndescription: \"This post discusses how to use R programming language to read, parse, and manipulate XML files, covering two R packages and techniques for accessing elements and converting XML files to R data structures like tibbles and data.frames. In this post we will with two packages xml2 and XML.\"\ncategories:\n  - tidy data\n  - XML\nformat: \n  html:\n    toc: true\n    toc-location: left\n    df-print: paged\n    code-tools: true\nexecute: \n  warning: false\neditor_options: \n  chunk_output_type: console\n---\n\n\n<img src=\"images/xml-logo.jpg\" alt=\"XML Logo\" style=\"height: 150px; display: block; margin: auto;\"/>\n\n\n## Basic: Read and Parse XML Files\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(xml2)\nlibrary(XML)\n\n## Load \nemployee_data <- read_xml(\"data.xml\")\nemployee_data\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{xml_document}\n<records>\n[1] <employee>\\n  <id>1</id>\\n  <first_name>John</first_name>\\n  <last_name>S ...\n[2] <employee>\\n  <id>2</id>\\n  <first_name>Jane</first_name>\\n  <last_name>S ...\n[3] <employee>\\n  <id>3</id>\\n  <first_name>Frank</first_name>\\n  <last_name> ...\n[4] <employee>\\n  <id>4</id>\\n  <first_name>Judith</first_name>\\n  <last_name ...\n[5] <employee>\\n  <id>5</id>\\n  <first_name>Karen</first_name>\\n  <last_name> ...\n```\n:::\n:::\n\n\n \n\nLetss first get a sense of the loaded data whats in it and what we want to parse. We can just see structure with `xml_structure()`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Get a sense of structure\nxml_structure(employee_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<records>\n  <employee>\n    <id>\n      {text}\n    <first_name>\n      {text}\n    <last_name>\n      {text}\n    <position>\n      {text}\n    <salary>\n      {text}\n    <hire_date>\n      {text}\n    <department>\n      {text}\n  <employee>\n    <id>\n      {text}\n    <first_name>\n      {text}\n    <last_name>\n      {text}\n    <position>\n      {text}\n    <salary>\n      {text}\n    <hire_date>\n      {text}\n    <department>\n      {text}\n  <employee>\n    <id>\n      {text}\n    <first_name>\n      {text}\n    <last_name>\n      {text}\n    <position>\n      {text}\n    <salary>\n      {text}\n    <hire_date>\n      {text}\n    <department>\n      {text}\n  <employee>\n    <id>\n      {text}\n    <first_name>\n      {text}\n    <last_name>\n      {text}\n    <position>\n      {text}\n    <salary>\n      {text}\n    <hire_date>\n      {text}\n    <department>\n      {text}\n  <employee>\n    <id>\n      {text}\n    <first_name>\n      {text}\n    <last_name>\n      {text}\n    <position>\n      {text}\n    <salary>\n      {text}\n    <hire_date>\n      {text}\n    <department>\n      {text}\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## Parse Data\nemployee_xml <- xmlParse(employee_data)\nemployee_xml\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<records>\n  <employee>\n    <id>1</id>\n    <first_name>John</first_name>\n    <last_name>Smith</last_name>\n    <position>CEO</position>\n    <salary>10000</salary>\n    <hire_date>2022-1-1</hire_date>\n    <department>Management</department>\n  </employee>\n  <employee>\n    <id>2</id>\n    <first_name>Jane</first_name>\n    <last_name>Sense</last_name>\n    <position>Marketing Associate</position>\n    <salary>3500</salary>\n    <hire_date>2022-1-15</hire_date>\n    <department>Marketing</department>\n  </employee>\n  <employee>\n    <id>3</id>\n    <first_name>Frank</first_name>\n    <last_name>Brown</last_name>\n    <position>R Developer</position>\n    <salary>6000</salary>\n    <hire_date>2022-1-15</hire_date>\n    <department>IT</department>\n  </employee>\n  <employee>\n    <id>4</id>\n    <first_name>Judith</first_name>\n    <last_name>Rollers</last_name>\n    <position>Data Scientist</position>\n    <salary>6500</salary>\n    <hire_date>2022-3-1</hire_date>\n    <department>IT</department>\n  </employee>\n  <employee>\n    <id>5</id>\n    <first_name>Karen</first_name>\n    <last_name>Switch</last_name>\n    <position>Accountant</position>\n    <salary>4000</salary>\n    <hire_date>2022-1-10</hire_date>\n    <department>Accounting</department>\n  </employee>\n</records>\n \n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}